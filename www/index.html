<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <script type="text/javascript" src="d3/d3.js"></script>
    <script type="text/javascript" src="d3/d3.csv.js"></script>
    <script type="text/javascript" src="d3/d3.time.js"></script>
    <style>
             html,body,.parent{height: 100%; overflow: hidden;}
            .title{position: absolute; top: 0; left: 0; right: 0; height: 0; background-color: white; height: 80px; overflow: hidden;}
            .title p{position: absolute; bottom: 6px; left: 30px; height: 0;font-family:verdana;color: #7092be;font-weight:bold;font-size: 180%;}
            .top{position: absolute; top: 80px; left: 30px; right: 30px; height: 0; background-color: #7092be; height: 2px;}
            .left{position: absolute; top: 100px; left: 0;bottom: 30px; width: 800px; background-color: white;}
            .right{position: absolute; top: 100px; left: 800px; right: 0; bottom: 30px; background-color: white; overflow: hidden;}
            .bottom{position: absolute; left: 0; right: 0; bottom: 0; height: 30px; background-color: white;}
            .inner-left{ height: 25%; width: 800px; background-color: #white;}
            .halfhour {
              fill: #eeeeee;
              stroke: #ffffff;
              stroke-width: 3px;
              stroke-opacity: .1;
            }
            .alevel0{fill: #eeeeee}
            .alevel1{fill: #d6e685}
            .alevel2{fill: #8cc665}
            .alevel3{fill: #44a340}
            .alevel4{fill: #1e6823}

    </style>
</head>

<body>
    <div class="parent">
        <div class="title">
            <p>LAN-Monitor</p>
        </div>
        <div class="top"></div>
        <div class="left">
            <div class="inner-left" id='user-calendar0'></div>
            <div class="inner-left" id='user-calendar1'></div>
            <div class="inner-left" id='user-calendar2'></div>
            <div class="inner-left" id='user-calendar3'></div>
        </div>
        <div class="right"></div>
        <div class="bottom"></div>
    </div>
</body>

<script type="text/javascript">

var m = [29, 20, 20, 19], // top right bottom left margin
    w = 800 - m[1] - m[3], // width
    h = 120 - m[0] - m[2], // height
    z = 12; // cell size
    cz = 10;

var day = d3.time.format("%w"),
    week = d3.time.format("%U"),
    percent = d3.format(".1%"),
    formatDate = d3.time.format("%Y-%m-%d"),
    formatNumber = d3.format(",d"),
    formatPercent = d3.format("+.1%");

var day = function(inputdate){
    return Math.floor(inputdate/48) + 1
}

var halfhour = function(inputdate){
    return inputdate%48
}


var dataset = [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 7, 7, 4, 3, 3, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 6, 3, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 7, 0, 8, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 3, 7, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

var dataset2 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1]

var dicdata = {'236': 3, '13': 0, '269': 0, '75': 0, '15': 0, '225': 0, '122': 0, '144': 0, '60': 0, '294': 0, '123': 0, '235': 0, '192': 0, '246': 0, '113': 0, '5': 0, '111': 0, '4': 0, '232': 0, '258': 0, '322': 0, '64': 0, '233': 0, '56': 0, '99': 0, '198': 0, '201': 0, '23': 0, '128': 0, '46': 0, '142': 0, '157': 0, '325': 0, '35': 0, '175': 0, '94': 0, '214': 0, '109': 0, '32': 0, '268': 0, '58': 0, '304': 0, '143': 0, '34': 0, '24': 0, '92': 0, '181': 0, '328': 0, '315': 0, '184': 0, '288': 0, '159': 0, '10': 0, '98': 0, '256': 0, '208': 0, '241': 0, '190': 0, '11': 0, '12': 0, '41': 0, '117': 0, '270': 0, '206': 0, '197': 0, '291': 0, '82': 0, '160': 0, '189': 0, '39': 0, '307': 0, '254': 0, '318': 0, '149': 0, '200': 0, '114': 0, '7': 0, '31': 0, '171': 0, '40': 0, '238': 0, '286': 0, '6': 0, '55': 0, '204': 0, '91': 0, '9': 0, '252': 0, '138': 0, '309': 0, '323': 0, '57': 0, '212': 0, '14': 0, '229': 0, '27': 0, '51': 0, '261': 0, '248': 0, '104': 0, '265': 0, '313': 0, '237': 0, '180': 0, '158': 0, '262': 0, '30': 0, '302': 0, '135': 0, '275': 0, '108': 0, '3': 0, '132': 0, '333': 0, '73': 0, '130': 0, '25': 0, '306': 0, '37': 0, '224': 0, '272': 0, '303': 0, '290': 0, '222': 0, '22': 0, '259': 0, '106': 0, '163': 0, '210': 0, '243': 0, '178': 0, '133': 0, '305': 0, '151': 0, '230': 0, '228': 0, '112': 0, '255': 0, '8': 0, '320': 0, '105': 0, '84': 0, '147': 0, '139': 0, '327': 0, '191': 0, '321': 0, '62': 0, '176': 0, '100': 0, '194': 0, '215': 0, '278': 0, '59': 0, '168': 0, '311': 0, '85': 0, '45': 0, '169': 0, '188': 0, '314': 0, '54': 0, '77': 0, '156': 0, '185': 0, '71': 0, '216': 0, '154': 0, '36': 0, '300': 0, '140': 0, '126': 0, '211': 0, '161': 0, '33': 0, '317': 0, '199': 0, '102': 0, '226': 0, '202': 0, '263': 0, '81': 0, '90': 0, '162': 0, '80': 0, '125': 0, '217': 0, '78': 0, '223': 0, '312': 0, '179': 0, '150': 0, '329': 0, '239': 0, '68': 0, '332': 0, '218': 0, '134': 0, '61': 0, '209': 0, '26': 0, '19': 0, '242': 0, '110': 0, '103': 0, '172': 0, '289': 0, '240': 0, '292': 0, '247': 0, '107': 0, '131': 0, '17': 0, '282': 0, '287': 0, '271': 0, '83': 0, '70': 0, '1': 0, '49': 0, '87': 0, '0': 0, '324': 0, '127': 0, '2': 0, '298': 0, '42': 0, '182': 0, '167': 0, '67': 0, '177': 0, '124': 0, '285': 0, '44': 0, '79': 0, '280': 0, '164': 0, '119': 0, '213': 0, '274': 0, '66': 0, '196': 0, '220': 0, '145': 0, '43': 0, '319': 0, '195': 0, '89': 0, '137': 0, '86': 0, '299': 0, '295': 0, '28': 0, '301': 0, '120': 0, '245': 0, '115': 0, '153': 0, '170': 0, '155': 0, '293': 0, '165': 0, '53': 0, '63': 0, '129': 0, '47': 0, '253': 0, '250': 0, '50': 0, '69': 0, '335': 0, '234': 0, '173': 0, '219': 0, '166': 0, '186': 0, '227': 0, '249': 0, '244': 0, '203': 0, '96': 0, '20': 0, '183': 0, '146': 0, '74': 0, '48': 0, '93': 0, '331': 0, '65': 0, '260': 0, '52': 0, '148': 0, '334': 0, '316': 0, '266': 0, '38': 0, '116': 0, '76': 0, '251': 0, '257': 0, '279': 0, '326': 0, '221': 0, '16': 0, '21': 0, '152': 0, '281': 0, '207': 0, '101': 0, '273': 0, '277': 0, '264': 0, '267': 0, '296': 0, '283': 0, '18': 0, '95': 0, '141': 0, '284': 0, '193': 0, '136': 0, '97': 0, '205': 0, '88': 0, '174': 0, '29': 0, '276': 0, '121': 0, '118': 0, '310': 0, '187': 0, '330': 0, '231': 0, '308': 0, '72': 0, '297': 0}


var svg = d3.select("#user-calendar0")
    .append("div")
    .attr("class", "week-calendar")
    .style("width", w + m[1] + m[3] + "px")
    .style("height", h + m[0] + m[2] + "px")
    .style("display", "inline-block")
    .append("svg:svg")
    .attr("width", w + m[1] + m[3])
    .attr("height", h + m[0] + m[2])
    .attr("class", "RdYlGn")
    .append("svg:g")
    .attr("transform", "translate(" + 30 + "," + (m[0] + (h - z * 7) / 2) + ")");


var rect = svg.selectAll("rect.halfhour")
    .data(function() { return d3.range(0, 48*7) })
    .enter().append("svg:rect")
    .attr("class", "halfhour")
    .attr("width", cz)
    .attr("height", cz)
    .attr("x", function(d) { return halfhour(d)*z; })
    .attr("y", function(d) { return day(d)*z; });



var getactivelevel = function(d){
    return Math.ceil(d/2)
}

d3.select("#user-calendar0").selectAll("rect.halfhour")
        .attr("class", function(d) { return "halfhour alevel" + getactivelevel(dataset[d]); })


d3.select("#user-calendar0").selectAll("rect.halfhour")
        .attr("class", function(d) { return "halfhour alevel" + getactivelevel(dataset2[d]); })

d3.select("#user-calendar0").selectAll("rect.halfhour")
        .attr("class", function(d) { return "halfhour alevel" + getactivelevel(dicdata[d]); })


</script>

</html>
